(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{304:function(s,t,a){s.exports=a.p+"assets/img/npm.6ab1cb7a.png"},369:function(s,t,a){"use strict";a.r(t);var n=a(10),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"npm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[s._v("#")]),s._v(" npm")]),s._v(" "),t("h2",{attrs:{id:"npm-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-概述"}},[s._v("#")]),s._v(" npm 概述")]),s._v(" "),t("p",[s._v("node package module, NodeJs 的包管理工具")]),s._v(" "),t("h2",{attrs:{id:"package-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[s._v("#")]),s._v(" package.json")]),s._v(" "),t("p",[s._v("NodeJs 项目必备的配置文件,常见的属性有:")]),s._v(" "),t("h5",{attrs:{id:"name-模块名称-可以添加组织作用域-scope-vue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#name-模块名称-可以添加组织作用域-scope-vue"}},[s._v("#")]),s._v(" name: 模块名称，可以添加组织作用域：@scope/vue")]),s._v(" "),t("h5",{attrs:{id:"version-模块的版本号-一般遵循-semver-规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#version-模块的版本号-一般遵循-semver-规范"}},[s._v("#")]),s._v(" version: 模块的版本号,一般遵循 Semver 规范")]),s._v(" "),t("h5",{attrs:{id:"main-模块的主入口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#main-模块的主入口"}},[s._v("#")]),s._v(" main: 模块的主入口")]),s._v(" "),t("h5",{attrs:{id:"bin-命令行模块命令入口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bin-命令行模块命令入口"}},[s._v("#")]),s._v(" bin: 命令行模块命令入口")]),s._v(" "),t("h5",{attrs:{id:"scripts-npm-run-command-脚本的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scripts-npm-run-command-脚本的配置"}},[s._v("#")]),s._v(" scripts: npm run [command] 脚本的配置")]),s._v(" "),t("h5",{attrs:{id:"publishconfig-发布配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#publishconfig-发布配置"}},[s._v("#")]),s._v(" publishConfig: 发布配置")]),s._v(" "),t("h5",{attrs:{id:"files-发布的目录合集"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#files-发布的目录合集"}},[s._v("#")]),s._v(" files: 发布的目录合集")]),s._v(" "),t("h5",{attrs:{id:"description-模块描述信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#description-模块描述信息"}},[s._v("#")]),s._v(" description: 模块描述信息")]),s._v(" "),t("h5",{attrs:{id:"keywords-模块关键字-一般可用于搜索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keywords-模块关键字-一般可用于搜索"}},[s._v("#")]),s._v(" keywords: 模块关键字，一般可用于搜索")]),s._v(" "),t("h5",{attrs:{id:"author-模块作者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#author-模块作者"}},[s._v("#")]),s._v(" author: 模块作者")]),s._v(" "),t("h5",{attrs:{id:"contributors-模块贡献者信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contributors-模块贡献者信息"}},[s._v("#")]),s._v(" contributors: 模块贡献者信息")]),s._v(" "),t("h5",{attrs:{id:"homepage-模块主页"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#homepage-模块主页"}},[s._v("#")]),s._v(" homepage: 模块主页")]),s._v(" "),t("h5",{attrs:{id:"repository-模块代码仓库地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#repository-模块代码仓库地址"}},[s._v("#")]),s._v(" repository: 模块代码仓库地址")]),s._v(" "),t("h5",{attrs:{id:"dependencies-模块所依赖的生产环境的依赖-需要该依赖才能运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependencies-模块所依赖的生产环境的依赖-需要该依赖才能运行"}},[s._v("#")]),s._v(" dependencies: 模块所依赖的生产环境的依赖，需要该依赖才能运行")]),s._v(" "),t("h5",{attrs:{id:"devdependencies-开发该模块所需要的依赖-类似-webpack-并不需要运行时加载该依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#devdependencies-开发该模块所需要的依赖-类似-webpack-并不需要运行时加载该依赖"}},[s._v("#")]),s._v(" devDependencies: 开发该模块所需要的依赖，类似 webpack，并不需要运行时加载该依赖")]),s._v(" "),t("h5",{attrs:{id:"peerdependencies-模块所依赖的版本和用户所依赖的库的版本会进行对比。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#peerdependencies-模块所依赖的版本和用户所依赖的库的版本会进行对比。"}},[s._v("#")]),s._v(" peerDependencies: 模块所依赖的版本和用户所依赖的库的版本会进行对比。")]),s._v(" "),t("h5",{attrs:{id:"optionaldependencies-非必须的依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#optionaldependencies-非必须的依赖"}},[s._v("#")]),s._v(" optionalDependencies: 非必须的依赖")]),s._v(" "),t("h5",{attrs:{id:"license-协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#license-协议"}},[s._v("#")]),s._v(" license: 协议")]),s._v(" "),t("p",[s._v("main 定义了 npm 包的入口文件，Browser 环境和 Node 环境均可使用；")]),s._v(" "),t("p",[s._v("module 定义 npm 包的 ESM 规范的入口文件，Browser 环境和 Node 环境均可使用；")]),s._v(" "),t("p",[s._v("browser 定义 npm 包在 Browser 环境下的入口文件。")]),s._v(" "),t("h2",{attrs:{id:"常见参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见参数"}},[s._v("#")]),s._v(" 常见参数")]),s._v(" "),t("h5",{attrs:{id:"unsafe-perm-npm-默认不支持-root-用户运行-即使用了也会自动转成-nobody-会没有写入等权限-这个参数会直接切换到运行用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unsafe-perm-npm-默认不支持-root-用户运行-即使用了也会自动转成-nobody-会没有写入等权限-这个参数会直接切换到运行用户"}},[s._v("#")]),s._v(" --unsafe-perm : npm 默认不支持 root 用户运行，即使用了也会自动转成 nobody，会没有写入等权限，这个参数会直接切换到运行用户")]),s._v(" "),t("h2",{attrs:{id:"npm-模块加载方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-模块加载方式"}},[s._v("#")]),s._v(" npm 模块加载方式")]),s._v(" "),t("p",[t("code",[s._v("npm")]),s._v(" 老版本中，"),t("code",[s._v("npm install")]),s._v(" 会有很多问题。"),t("code",[s._v("npm 5+")]),s._v("以后解决了依赖嵌套和依赖顺序的问题。")]),s._v(" "),t("ul",[t("li",[s._v("npm 1: 嵌套")]),s._v(" "),t("li",[s._v("npm 3: 扁平")]),s._v(" "),t("li",[s._v("npm 5: 扁平+lock")])]),s._v(" "),t("p",[s._v("在新版本的 npm 5+中，当我们执行"),t("code",[s._v("npm i")]),s._v("的时候，会采用扁平+lock 的模式来安装依赖。默认都会安装在一级的"),t("code",[s._v("node_modules")]),s._v("下面，当有相同的依赖不符合已安装的版本范围时，就会安装在当依赖模块的"),t("code",[s._v("node_modules")]),s._v("中。我们加载模块的顺序如下：")]),s._v(" "),t("ul",[t("li",[s._v("在当前模块路径下加载")]),s._v(" "),t("li",[s._v("在当前模块 node_modules 路径下加载")]),s._v(" "),t("li",[s._v("在上级模块的 node_modules 路径下加载")]),s._v(" "),t("li",[s._v("全局模块的 node_modules")])]),s._v(" "),t("p",[s._v("同时，通过 lock 文件来锁定依赖的版本结构并且加速安装：")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package-lock.json")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lockfileVersion"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"requires"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vue"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.6.11"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"resolved"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://registry.npmjs.org/vue/-/vue-2.6.11.tgz"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"integrity"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha512-VfPwgcGABbGAue9+sfrD4PuwFar7gPb1yl1UK1MwXoQPAw0BKSqWfoYCT/ThFrdEVWoI51dBuyCoiNU9bZDZxQ=="')]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vue-router"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3.3.2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"resolved"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://registry.npmjs.org/vue-router/-/vue-router-3.3.2.tgz"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"integrity"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha512-5sEbcfb7MW8mY8lbUVbF4kgcipGXsagkM/X+pb6n0MhjP+RorWIUTPAPSqgPaiPOxVCXgAItBl8Vwz8vq78faA=="')]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h6",{attrs:{id:"npm-install-的流程图-网图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-install-的流程图-网图"}},[s._v("#")]),s._v(" npm install 的流程图(网图)")]),s._v(" "),t("p",[t("img",{attrs:{src:a(304),alt:"npm"}})]),s._v(" "),t("h5",{attrs:{id:"ps-当-npm-i-的时候-默认不会更新当前库-如果修改了第三方的代码就会有影响-需要-npm-i-package-添加对应的包名来更新当前库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ps-当-npm-i-的时候-默认不会更新当前库-如果修改了第三方的代码就会有影响-需要-npm-i-package-添加对应的包名来更新当前库"}},[s._v("#")]),s._v(" ps: 当 npm i 的时候，默认不会更新当前库（如果修改了第三方的代码就会有影响），需要 npm i [package]添加对应的包名来更新当前库")]),s._v(" "),t("h5",{attrs:{id:"ps-npm5-4-2-以上-默认根据-lock-安装-如果出现-lock-文件和-package-json-版本不兼容-以-package-json-为主-同时更新-lock-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ps-npm5-4-2-以上-默认根据-lock-安装-如果出现-lock-文件和-package-json-版本不兼容-以-package-json-为主-同时更新-lock-文件"}},[s._v("#")]),s._v(" ps: npm5.4.2 以上，默认根据 lock 安装，如果出现 lock 文件和 package.json 版本不兼容，以 package.json 为主，同时更新 lock 文件")]),s._v(" "),t("h5",{attrs:{id:"ps-npm-包的安装顺序对于依赖树的影响很大。模块安装顺序可能影响-node-modules-内的文件数量。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ps-npm-包的安装顺序对于依赖树的影响很大。模块安装顺序可能影响-node-modules-内的文件数量。"}},[s._v("#")]),s._v(" ps: npm 包的安装顺序对于依赖树的影响很大。模块安装顺序可能影响 node_modules 内的文件数量。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置依赖安装过程中内部模块下载Node的淘宝镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" disturl https://npm.taobao.org/mirrors/node/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置常用模块的淘宝镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" sass_binary_site https://npm.taobao.org/mirrors/node-sass/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" sharp_dist_base_url https://npm.taobao.org/mirrors/sharp-libvips/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" electron_mirror https://npm.taobao.org/mirrors/electron/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" puppeteer_download_host https://npm.taobao.org/mirrors/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" phantomjs_cdnurl https://npm.taobao.org/mirrors/phantomjs/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" sentrycli_cdnurl https://npm.taobao.org/mirrors/sentry-cli/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" sqlite3_binary_site https://npm.taobao.org/mirrors/sqlite3/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" python_mirror https://npm.taobao.org/mirrors/python/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装rimraf并设置package.json")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" rimraf\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装前请确保当前的Node版本和node-sass版本已兼容")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装失败")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" cache clean "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" rebuild node-sass 或 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run reinstall\n")])])]),t("h6",{attrs:{id:"yarn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[s._v("#")]),s._v(" yarn")]),s._v(" "),t("p",[s._v("流程： 检测（checking）→ 解析包（Resolving Packages） → 获取包（Fetching Packages）→ 链接包（Linking Packages）→ 构建包（Building Packages）\n执行 yarn 的时候会自动 dedupe,优化整个目录结构，使不需要的依赖被删除")]),s._v(" "),t("h2",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),t("h5",{attrs:{id:"https-zhuanlan-zhihu-com-p-37285173"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#https-zhuanlan-zhihu-com-p-37285173"}},[s._v("#")]),s._v(" https://zhuanlan.zhihu.com/p/37285173")]),s._v(" "),t("h5",{attrs:{id:"https-juejin-im-post-5df789066fb9a0161f30580c-heading-1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#https-juejin-im-post-5df789066fb9a0161f30580c-heading-1"}},[s._v("#")]),s._v(" https://juejin.im/post/5df789066fb9a0161f30580c#heading-1")])])}),[],!1,null,null,null);t.default=e.exports}}]);